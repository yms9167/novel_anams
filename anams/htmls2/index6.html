<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—…ë¬´ ìš°ì„ ìˆœìœ„ ì •ë¦¬ê¸°</title>
    <!-- Tailwind CSS CDN ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for better aesthetics and readability */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        .priority-score {
            font-weight: 700;
            font-size: 1.5rem;
        }
        .task-card {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
            border-left: 8px solid;
        }
        /* Tailwind classes for priority colors (Red/Yellow/Green) */
        .border-high { border-color: #ef4444; } /* Red-500 */
        .border-medium { border-color: #f59e0b; } /* Amber-500 */
        .border-low { border-color: #10b981; } /* Emerald-500 */

        .bg-gradient-high {
            background-image: linear-gradient(to right, #fef2f2, #fee2e2); /* Red tones for high priority */
        }
        .bg-gradient-medium {
            background-image: linear-gradient(to right, #fffdf2, #fff7d0); /* Yellow tones for medium priority */
        }
        .bg-gradient-low {
            background-image: linear-gradient(to right, #ecfdf5, #d1fae5); /* Green tones for low priority */
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <header class="mb-8">
            <h1 class="text-4xl font-extrabold text-gray-900 leading-tight">ğŸ”¥ ICE ì—…ë¬´ ìš°ì„ ìˆœìœ„ ì •ë¦¬ê¸°</h1>
            <p class="text-gray-600 mt-2">ì—…ë¬´ë¥¼ ì¶”ê°€í•˜ê³  ì¤‘ìš”ë„, ê¸´ê¸‰ë„, ì˜í–¥ë ¥, ë…¸ë ¥(ICE/RICE ëª¨ë¸ ë³€í˜•)ì„ í‰ê°€í•˜ì—¬ ìë™ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ì •ë ¬í•©ë‹ˆë‹¤. (ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤)</p>
        </header>
        
        <!-- 0. ê°€ì¤‘ì¹˜ ì„¤ì • í¼ (ìƒˆë¡œìš´ ì„¹ì…˜) -->
        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">âš™ï¸ ìš°ì„ ìˆœìœ„ ê°€ì¤‘ì¹˜ ì„¤ì •</h2>
            <div id="weight-config" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <!-- ì¤‘ìš”ë„ ê°€ì¤‘ì¹˜ -->
                <div>
                    <label for="weight-importance" class="block text-sm font-medium text-gray-700">ì¤‘ìš”ë„(I) ê°€ì¤‘ì¹˜</label>
                    <input type="number" id="weight-importance" min="0" value="3" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-2 border text-center focus:border-indigo-500 focus:ring-indigo-500">
                </div>
                <!-- ê¸´ê¸‰ë„ ê°€ì¤‘ì¹˜ -->
                <div>
                    <label for="weight-urgency" class="block text-sm font-medium text-gray-700">ê¸´ê¸‰ë„(C) ê°€ì¤‘ì¹˜</label>
                    <input type="number" id="weight-urgency" min="0" value="3" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-2 border text-center focus:border-indigo-500 focus:ring-indigo-500">
                </div>
                <!-- ì˜í–¥ë ¥ ê°€ì¤‘ì¹˜ -->
                <div>
                    <label for="weight-impact" class="block text-sm font-medium text-gray-700">ì˜í–¥ë ¥(E) ê°€ì¤‘ì¹˜</label>
                    <input type="number" id="weight-impact" min="0" value="2" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-2 border text-center focus:border-indigo-500 focus:ring-indigo-500">
                </div>
                <!-- ë…¸ë ¥ ê°€ì¤‘ì¹˜ -->
                <div>
                    <label for="weight-effort" class="block text-sm font-medium text-gray-700">ë…¸ë ¥(R) ê°€ì¤‘ì¹˜ (ê°ì )</label>
                    <input type="number" id="weight-effort" min="0" value="1" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-2 border text-center focus:border-indigo-500 focus:ring-indigo-500">
                </div>
            </div>
            <p id="formula-display" class="text-xs text-gray-500 mt-3 font-semibold" aria-live="polite">
                <!-- Formula will be dynamically updated here -->
                *ìš°ì„ ìˆœìœ„ ì ìˆ˜ = (ì¤‘ìš”ë„ x3) + (ê¸´ê¸‰ë„ x3) + (ì˜í–¥ë ¥ x2) - (ë…¸ë ¥ x1)
            </p>
        </section>

        <!-- 1. ì—…ë¬´ ì…ë ¥ í¼ -->
        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">âœï¸ ìƒˆë¡œìš´ ì—…ë¬´ ì¶”ê°€</h2>
            <form id="task-form" class="space-y-4">
                <!-- ì—…ë¬´ ì´ë¦„ -->
                <div>
                    <label for="task-name" class="block text-sm font-medium text-gray-700">ì—…ë¬´ ë‚´ìš©</label>
                    <input type="text" id="task-name" required class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border" placeholder="ì˜ˆ: 2024ë…„ 4ë¶„ê¸° ë³´ê³ ì„œ ì‘ì„±">
                </div>

                <!-- í‰ê°€ ìŠ¬ë¼ì´ë” -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- ì¤‘ìš”ë„ -->
                    <div>
                        <label for="importance" class="block text-sm font-medium text-gray-700">ì¤‘ìš”ë„ (Importance: I) [1-5]</label>
                        <p class="text-xs text-gray-500 mt-0.5">ì—…ë¬´ê°€ í•µì‹¬ ëª©í‘œ ë‹¬ì„± ë° ê°€ì¹˜ ì°½ì¶œì— ê¸°ì—¬í•˜ëŠ” ì •ë„. (1: ë‚®ìŒ ~ 5: ë†’ìŒ)</p>
                        <input type="range" id="importance" min="1" max="5" value="3" class="mt-1 w-full" oninput="updateSliderDisplay('importance', this.value)">
                        <output id="importance-value" class="block text-center font-bold text-indigo-600">3</output>
                        <p id="importance-desc" class="text-center text-sm text-gray-800 font-medium mt-1"></p>
                    </div>
                    <!-- ê¸´ê¸‰ë„ -->
                    <div>
                        <label for="urgency" class="block text-sm font-medium text-gray-700">ê¸´ê¸‰ë„ (Criticality: C) [1-5]</label>
                        <p class="text-xs text-gray-500 mt-0.5">ì—…ë¬´ë¥¼ ì–¼ë§ˆë‚˜ ë¹¨ë¦¬ ì™„ë£Œí•´ì•¼ í•˜ëŠ”ì§€ì˜ ì••ë°•ê°. (1: ë‚®ìŒ ~ 5: ë†’ìŒ)</p>
                        <input type="range" id="urgency" min="1" max="5" value="3" class="mt-1 w-full" oninput="updateSliderDisplay('urgency', this.value)">
                        <output id="urgency-value" class="block text-center font-bold text-indigo-600">3</output>
                        <p id="urgency-desc" class="text-center text-sm text-gray-800 font-medium mt-1"></p>
                    </div>
                    <!-- ì˜í–¥ë ¥ -->
                    <div>
                        <label for="impact" class="block text-sm font-medium text-gray-700">ì˜í–¥ë ¥ (Impact: E) [1-5]</label>
                        <p class="text-xs text-gray-500 mt-0.5">ì—…ë¬´ê°€ ì™„ë£Œë˜ì—ˆì„ ë•Œ ì–»ê²Œ ë˜ëŠ” ì˜ˆìƒ ì´ì ì´ë‚˜ ê¸ì •ì  íš¨ê³¼. (1: ë‚®ìŒ ~ 5: ë†’ìŒ)</p>
                        <input type="range" id="impact" min="1" max="5" value="3" class="mt-1 w-full" oninput="updateSliderDisplay('impact', this.value)">
                        <output id="impact-value" class="block text-center font-bold text-indigo-600">3</output>
                        <p id="impact-desc" class="text-center text-sm text-gray-800 font-medium mt-1"></p>
                    </div>
                    <!-- ë…¸ë ¥ -->
                    <div>
                        <label for="effort" class="block text-sm font-medium text-gray-700">ë…¸ë ¥ (Effort: -R) [1-5]</label>
                        <p class="text-xs text-gray-500 mt-0.5">ì—…ë¬´ë¥¼ ì™„ë£Œí•˜ëŠ” ë° í•„ìš”í•œ ì‹œê°„, ë¦¬ì†ŒìŠ¤ ë˜ëŠ” ë³µì¡ì„±. (1: ë‚®ìŒ ~ 5: ë†’ìŒ)</p>
                        <input type="range" id="effort" min="1" max="5" value="3" class="mt-1 w-full" oninput="updateSliderDisplay('effort', this.value)">
                        <output id="effort-value" class="block text-center font-bold text-indigo-600">3</output>
                        <p id="effort-desc" class="text-center text-sm text-gray-800 font-medium mt-1"></p>
                    </div>
                </div>
                
                <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-150 ease-in-out shadow-md hover:shadow-lg">
                    âœ… ì—…ë¬´ ì¶”ê°€ ë° ìš°ì„ ìˆœìœ„ ê³„ì‚°
                </button>
            </form>
        </section>

        <!-- 2. ìš°ì„ ìˆœìœ„ ëª©ë¡ (ì‹¤ì‹œê°„ ë°˜ì˜) -->
        <section>
            <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ“‹ í˜„ì¬ ì—…ë¬´ ëª©ë¡ (ìš°ì„ ìˆœìœ„ ì •ë ¬)</h2>
            <div id="task-list-container" class="space-y-4">
                <!-- Tasks will be rendered here dynamically -->
                <p id="loading-message" class="text-gray-500 text-center p-8">ë¡œë”© ì¤‘...</p>
            </div>
        </section>
        
        <!-- ì»¤ìŠ¤í…€ ëª¨ë‹¬ (Confirm ëŒ€ì‹  ì‚¬ìš©) -->
        <div id="confirm-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-xl shadow-2xl w-full max-w-sm">
                <p id="confirm-text" class="text-lg font-semibold mb-6 text-gray-800">ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <div class="flex justify-end space-x-3">
                    <button id="modal-cancel-btn" class="px-4 py-2 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition">ì·¨ì†Œ</button>
                    <button id="modal-confirm-btn" class="px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition">ì‚­ì œ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ìƒìˆ˜ ë° ì „ì—­ ë³€ìˆ˜
        const LOCAL_STORAGE_KEY = 'priority_tasks';
        const WEIGHTS_STORAGE_KEY = 'priority_weights';
        const taskForm = document.getElementById('task-form');
        const taskListContainer = document.getElementById('task-list-container');
        const loadingMessage = document.getElementById('loading-message');
        const confirmModal = document.getElementById('confirm-modal');
        const modalConfirmBtn = document.getElementById('modal-confirm-btn');
        const modalCancelBtn = document.getElementById('modal-cancel-btn');
        let currentTasks = [];
        let taskToDeleteId = null;
        // ì´ˆê¸° ê°€ì¤‘ì¹˜ ì„¤ì • (ì‚¬ìš©ì ì •ì˜ ê°€ëŠ¥)
        let currentWeights = { importance: 3, urgency: 3, impact: 2, effort: 1 };

        /**
         * ì¤‘ìš”ë„(Importance: I)ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ë°˜í™˜í•©ë‹ˆë‹¤. (ì „ëµì  ê°€ì¹˜ ë° ëª©í‘œ ê¸°ì—¬)
         * @param {string} value - í˜„ì¬ ìŠ¬ë¼ì´ë” ê°’ (1-5)
         * @returns {string} ìƒì„¸ ì„¤ëª…
         */
        function getImportanceDescription(value) {
            switch (value) {
                case '1': return 'ë§¤ìš° ë‚®ìŒ (ì°¸ê³ ìš©): ì¥ê¸°ì ì¸ ì „ëµ ê°€ì¹˜ê°€ ì—†ìœ¼ë©°, ë‹¨ìˆœíˆ ì •ë³´ ì œê³µì´ë‚˜ ê°œì¸ ë§Œì¡±ì— ê·¸ì¹©ë‹ˆë‹¤.';
                case '2': return 'ë‚®ìŒ (ê°œì„ ): ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ì˜ ë¯¸ë¯¸í•œ ê°œì„ ì— ê¸°ì—¬í•˜ë©°, í•„ìˆ˜ì ì´ì§€ ì•Šì€ ë¶€ìˆ˜ì ì¸ ê°€ì¹˜ë§Œ ì œê³µí•©ë‹ˆë‹¤.';
                case '3': return 'ë³´í†µ (ì •ìƒ ìš´ì˜): ì¼ìƒì ì¸ ìš´ì˜ì— í•„ìš”í•˜ë©°, ë¶€ì¬ ì‹œ ì—…ë¬´ íš¨ìœ¨ì´ ì €í•˜ë˜ì§€ë§Œ ì¹˜ëª…ì ì´ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.';
                case '4': return 'ë†’ìŒ (ì „ëµì  ì¤‘ìš”): ì£¼ìš” í”„ë¡œì íŠ¸ ì„±ê³µì— í•„ìˆ˜ì ì´ë©°, ê²½ìŸ ìš°ìœ„ë¥¼ í™•ë³´í•˜ëŠ” ë° í¬ê²Œ ê¸°ì—¬í•©ë‹ˆë‹¤.';
                case '5': return 'ë§¤ìš° ë†’ìŒ (í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤): íšŒì‚¬ì˜ ìƒì¡´ì´ë‚˜ í•µì‹¬ ëª©í‘œ(ë§¤ì¶œ, ë²•ê·œ ì¤€ìˆ˜ ë“±)ì— ì§ì ‘ì ì´ê³  ê²°ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.';
                default: return '';
            }
        }

        /**
         * ê¸´ê¸‰ë„(Criticality: C)ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ë°˜í™˜í•©ë‹ˆë‹¤. (ë§ˆê° ê¸°í•œ ë° ì§€ì—° ìœ„í—˜)
         * @param {string} value - í˜„ì¬ ìŠ¬ë¼ì´ë” ê°’ (1-5)
         * @returns {string} ìƒì„¸ ì„¤ëª…
         */
        function getUrgencyDescription(value) {
            switch (value) {
                case '1': return 'ë§¤ìš° ë‚®ìŒ (ììœ¨): ë§ˆê° ê¸°í•œì´ ì •í•´ì ¸ ìˆì§€ ì•Šê±°ë‚˜, ë‹¤ë¥¸ ì—…ë¬´ê°€ ëë‚œ í›„ ì–¸ì œë“  ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
                case '2': return 'ë‚®ìŒ (ì—¬ìœ ): í•œ ë‹¬ ì´ìƒì˜ ê¸°í•œì´ ë‚¨ì•˜ê±°ë‚˜ ë‚´ë¶€ì ì¸ ê¸°í•œì¼ ë¿, ì—¬ìœ ë¡­ê²Œ ê³„íšì„ ì„¸ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
                case '3': return 'ë³´í†µ (ì¡°ì • ê°€ëŠ¥): ë‹¤ìŒ ì£¼ ì •ë„ì˜ ë§ˆê° ê¸°í•œì´ ìˆìœ¼ë©°, íŒ€ ê°„ì˜ í˜‘ì˜ë¥¼ í†µí•´ ì¡°ì • ì—¬ì§€ê°€ ì•½ê°„ ìˆìŠµë‹ˆë‹¤.';
                case '4': return 'ë†’ìŒ (ê¸´ê¸‰/ê³ ê°): ê¸ˆì£¼ ë‚´ ë§ˆê°ì´ë©°, ì§€ì—° ì‹œ ê³ ê°ì—ê²Œ ì§ì ‘ì ì¸ í”¼í•´ë‚˜ í° ë¶ˆë§Œ/ì´íƒˆì´ ì˜ˆìƒë©ë‹ˆë‹¤.';
                case '5': return 'ë§¤ìš° ë†’ìŒ (ì¦‰ì‹œ/ìœ„í—˜): ì¦‰ì‹œ í•´ê²°í•´ì•¼ í•˜ë©°, ì˜¤ëŠ˜ì„ ë„˜ê¸°ë©´ ì„œë¹„ìŠ¤ ì¥ì• , ê³„ì•½ íŒŒê¸° ë“± ë§‰ëŒ€í•œ ì†ì‹¤ì´ ë°œìƒí•©ë‹ˆë‹¤.';
                default: return '';
            }
        }

        /**
         * ì˜í–¥ë ¥(Impact: E)ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ë°˜í™˜í•©ë‹ˆë‹¤. (ê²°ê³¼ì ì¸ ì´ë“/íš¨ê³¼ ë²”ìœ„)
         * @param {string} value - í˜„ì¬ ìŠ¬ë¼ì´ë” ê°’ (1-5)
         * @returns {string} ìƒì„¸ ì„¤ëª…
         */
        function getImpactDescription(value) {
            switch (value) {
                case '1': return 'ë§¤ìš° ë‚®ìŒ (ê°œì¸ ì´ìµ): ì—…ë¬´ ë‹´ë‹¹ì ë³¸ì¸ì—ê²Œë§Œ ìœ ìš©í•˜ë©°, ì™¸ë¶€ ë˜ëŠ” ë‹¤ë¥¸ íŒ€ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.';
                case '2': return 'ë‚®ìŒ (ì†Œìˆ˜ ì´ìµ): 1~2ê°œ íŒ€ì˜ ì‚¬ì†Œí•œ ë¶ˆí¸í•¨ì„ í•´ì†Œí•˜ê±°ë‚˜, ì œí•œëœ ì‚¬ìš©ìì—ê²Œë§Œ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.';
                case '3': return 'ë³´í†µ (ì¤‘ê°„ ì´ìµ): íŠ¹ì • íŒ€ ë˜ëŠ” ê¸°ëŠ¥ ì˜ì—­ì˜ ì—…ë¬´ íš¨ìœ¨ì„ ê°œì„ í•˜ë©°, ì´ì ì´ ëª…í™•í•˜ê²Œ ì¸¡ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.';
                case '4': return 'ë†’ìŒ (ì£¼ìš” ì´ìµ): ìˆ˜ë°±~ìˆ˜ì²œ ëª…ì˜ ê³ ê°ì—ê²Œ ëª…í™•í•œ ì´ì ì„ ì œê³µí•˜ê±°ë‚˜, ì£¼ìš” ë¶€ì„œì˜ ì—…ë¬´ íš¨ìœ¨ì„ íšê¸°ì ìœ¼ë¡œ ê°œì„ í•©ë‹ˆë‹¤.';
                case '5': return 'ë§¤ìš° ë†’ìŒ (ìµœëŒ€ ì´ìµ): ìˆ˜ë§Œ ëª… ì´ìƒì˜ ê³ ê°ì—ê²Œ í˜œíƒì„ ì œê³µí•˜ê±°ë‚˜, ìˆ˜ì–µ ì› ì´ìƒì˜ ë¹„ìš© ì ˆê°/ë§¤ì¶œ ì¦ëŒ€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.';
                default: return '';
            }
        }

        /**
         * ë…¸ë ¥(Effort: -R)ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ë°˜í™˜í•©ë‹ˆë‹¤. (ì†Œìš”ë˜ëŠ” ë¦¬ì†ŒìŠ¤/ì‹œê°„)
         * @param {string} value - í˜„ì¬ ìŠ¬ë¼ì´ë” ê°’ (1-5)
         * @returns {string} ìƒì„¸ ì„¤ëª… (ì‹œê°„ ê¸°ë°˜)
         */
        function getEffortDescription(value) {
            switch (value) {
                case '1': return 'ë§¤ìš° ë‚®ìŒ (ì¦‰ì‹œ ì²˜ë¦¬): 1ì‹œê°„ ì´ë‚´ ì™„ë£Œ ê°€ëŠ¥í•œ ë‹¨ìˆœí•˜ê³  ì¦‰ê°ì ì¸ ì‘ì—…ì…ë‹ˆë‹¤. (ì˜ˆ: ì˜¤íƒ€ ìˆ˜ì •)';
                case '2': return 'ë‚®ìŒ (ë‹¨ê¸° ì‘ì—…): 1~8ì‹œê°„ ë‚´ì— ì™„ë£Œ ê°€ëŠ¥í•˜ë©°, ê°„ë‹¨í•œ ì¤€ë¹„ë‚˜ í™•ì¸ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.';
                case '3': return 'ë³´í†µ (ì¤‘ê¸° ì‘ì—…): í•œ ëª…ì´ 1~3ì¼ ì•ˆì— ì™„ë£Œí•  ìˆ˜ ìˆëŠ” ì‘ì—…ìœ¼ë¡œ, ëª…í™•í•œ ê³„íšì´ í•„ìš”í•©ë‹ˆë‹¤. (8~24ì‹œê°„)';
                case '4': return 'ë†’ìŒ (ì¥ê¸° ì‘ì—…): í•œ ëª… ë˜ëŠ” ë‘ ëª…ì´ 3ì¼~2ì£¼ ë™ì•ˆ ì§‘ì¤‘í•´ì•¼ í•˜ëŠ” ì‘ì—…ìœ¼ë¡œ, ì¤‘ê°„ ë³µì¡ë„ë¥¼ ê°€ì§‘ë‹ˆë‹¤. (24~100ì‹œê°„)';
                case '5': return 'ë§¤ìš° ë†’ìŒ (ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸): ì—¬ëŸ¬ íŒ€(3ì¸ ì´ìƒ)ì´ 2ì£¼ ì´ìƒ ì „ë…í•´ì•¼ í•˜ëŠ” ë³µì¡í•˜ê³  ê´‘ë²”ìœ„í•œ ì‘ì—…ì…ë‹ˆë‹¤.';
                default: return '';
            }
        }

        // --- ê°€ì¤‘ì¹˜ ê´€ë¦¬ í•¨ìˆ˜ ---

        /**
         * localStorageì—ì„œ ê°€ì¤‘ì¹˜ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
         * @returns {Object} ë¡œë“œëœ ê°€ì¤‘ì¹˜ ê°ì²´
         */
        function loadWeights() {
            try {
                const weightsJson = localStorage.getItem(WEIGHTS_STORAGE_KEY);
                // JSON.parse ì‹¤íŒ¨ ë˜ëŠ” ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ê°’ ë°˜í™˜
                return weightsJson ? JSON.parse(weightsJson) : { importance: 3, urgency: 3, impact: 2, effort: 1 };
            } catch (e) {
                console.error("ê°€ì¤‘ì¹˜ ë¡œë“œ ì‹¤íŒ¨:", e);
                return { importance: 3, urgency: 3, impact: 2, effort: 1 };
            }
        }

        /**
         * ê°€ì¤‘ì¹˜ë¥¼ localStorageì— ì €ì¥í•©ë‹ˆë‹¤.
         * @param {Object} weights - ì €ì¥í•  ê°€ì¤‘ì¹˜ ê°ì²´
         */
        function saveWeights(weights) {
            try {
                localStorage.setItem(WEIGHTS_STORAGE_KEY, JSON.stringify(weights));
            } catch (e) {
                console.error("ê°€ì¤‘ì¹˜ ì €ì¥ ì‹¤íŒ¨:", e);
            }
        }

        /**
         * ê°€ì¤‘ì¹˜ ì…ë ¥ í•„ë“œì˜ ê°’ì„ currentWeightsì™€ ë™ê¸°í™”í•©ë‹ˆë‹¤.
         */
        function syncWeightInputs() {
            document.getElementById('weight-importance').value = currentWeights.importance;
            document.getElementById('weight-urgency').value = currentWeights.urgency;
            document.getElementById('weight-impact').value = currentWeights.impact;
            document.getElementById('weight-effort').value = currentWeights.effort;
        }

        /**
         * ê°€ì¤‘ì¹˜ ì…ë ¥ ë³€ê²½ ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
         */
        function setupWeightListeners() {
            const ids = ['importance', 'urgency', 'impact', 'effort'];
            ids.forEach(id => {
                const input = document.getElementById(`weight-${id}`);
                // input ì´ë²¤íŠ¸: ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ë°œìƒ
                input.addEventListener('input', (e) => {
                    // ì…ë ¥ ê°’ì´ ìœ íš¨í•œ ìˆ«ìì¸ì§€ í™•ì¸, ì•„ë‹ˆë©´ 0ìœ¼ë¡œ ì²˜ë¦¬
                    const newValue = parseInt(e.target.value) || 0;
                    currentWeights[id] = newValue;
                    saveWeights(currentWeights);
                    updateFormulaDisplay();
                    // ê°€ì¤‘ì¹˜ê°€ ë°”ë€Œë©´ ëª¨ë“  ì—…ë¬´ì˜ ì ìˆ˜ë¥¼ ì¬ê³„ì‚°í•˜ì—¬ ì •ë ¬
                    renderTasks(); 
                });
            });
        }

        /**
         * ìš°ì„ ìˆœìœ„ ì ìˆ˜ ê³„ì‚° ê³µì‹ì„ UIì— ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         */
        function updateFormulaDisplay() {
            const formulaDisplay = document.getElementById('formula-display');
            const i = currentWeights.importance;
            const c = currentWeights.urgency;
            const e = currentWeights.impact;
            const r = currentWeights.effort;
            formulaDisplay.innerHTML = `
                *ìš°ì„ ìˆœìœ„ ì ìˆ˜ = (ì¤‘ìš”ë„ x${i}) + (ê¸´ê¸‰ë„ x${c}) + (ì˜í–¥ë ¥ x${e}) - (ë…¸ë ¥ x${r})
            `;
        }


        // --- ì—…ë¬´ ì²˜ë¦¬ í•¨ìˆ˜ ---

        /**
         * ìŠ¬ë¼ì´ë” ê°’ ë³€ê²½ ì‹œ ìˆ«ì ë° ì„¤ëª… í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         * @param {string} id - ìŠ¬ë¼ì´ë”ì˜ ê¸°ë³¸ ID (importance, urgency ë“±)
         * @param {string} value - í˜„ì¬ ìŠ¬ë¼ì´ë” ê°’ (1-5)
         */
        function updateSliderDisplay(id, value) {
            const valueElement = document.getElementById(`${id}-value`);
            const descElement = document.getElementById(`${id}-desc`);
            
            if (valueElement) {
                valueElement.textContent = value;
            }
            if (descElement) {
                // í•­ëª©ë³„ë¡œ ë‹¤ë¥¸ ì„¤ëª… í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
                switch (id) {
                    case 'importance':
                        descElement.textContent = getImportanceDescription(value);
                        break;
                    case 'urgency':
                        descElement.textContent = getUrgencyDescription(value);
                        break;
                    case 'impact':
                        descElement.textContent = getImpactDescription(value);
                        break;
                    case 'effort':
                        descElement.textContent = getEffortDescription(value);
                        break;
                    default:
                        descElement.textContent = '';
                }
            }
        }

        /**
         * ì—…ë¬´ì˜ ìš°ì„ ìˆœìœ„ ì ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
         * ê³µì‹: Score = (I * W_I) + (C * W_C) + (E * W_E) - (R * W_R)
         * @param {Object} task - ì—…ë¬´ ê°ì²´
         * @returns {number} ê³„ì‚°ëœ ìš°ì„ ìˆœìœ„ ì ìˆ˜
         */
        function calculatePriority(task) {
            const weights = currentWeights; 
            const importance = parseInt(task.importance);
            const urgency = parseInt(task.urgency);
            const impact = parseInt(task.impact);
            const effort = parseInt(task.effort);
            
            // I * W_I + C * W_C + E * W_E - R * W_R
            // ë…¸ë ¥(Effort)ì€ ì ìˆ˜ë¥¼ ê¹ëŠ” ìš”ì†Œì´ë¯€ë¡œ ëºë‹ˆë‹¤.
            return (importance * weights.importance) + 
                   (urgency * weights.urgency) + 
                   (impact * weights.impact) - 
                   (effort * weights.effort);
        }

        /**
         * localStorageì—ì„œ ì—…ë¬´ ëª©ë¡ì„ ë¡œë“œí•©ë‹ˆë‹¤.
         * @returns {Array<Object>} ë¡œë“œëœ ì—…ë¬´ ëª©ë¡
         */
        function loadTasks() {
            try {
                const tasksJson = localStorage.getItem(LOCAL_STORAGE_KEY);
                return tasksJson ? JSON.parse(tasksJson) : [];
            } catch (e) {
                console.error("localStorage ë¡œë“œ ì‹¤íŒ¨:", e);
                return [];
            }
        }

        /**
         * ì—…ë¬´ ëª©ë¡ì„ localStorageì— ì €ì¥í•©ë‹ˆë‹¤.
         * @param {Array<Object>} tasks - ì €ì¥í•  ì—…ë¬´ ëª©ë¡
         */
        function saveTasks(tasks) {
            try {
                localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(tasks));
            } catch (e) {
                console.error("localStorage ì €ì¥ ì‹¤íŒ¨:", e);
            }
        }

        /**
         * ì—…ë¬´ ëª©ë¡ì„ ìš°ì„ ìˆœìœ„ ì ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•˜ê³  ë Œë”ë§í•©ë‹ˆë‹¤.
         */
        function renderTasks() {
            // 1. ì ìˆ˜ ê³„ì‚° ë° ì •ë ¬
            currentTasks.forEach(task => {
                task.priorityScore = calculatePriority(task);
            });
            currentTasks.sort((a, b) => b.priorityScore - a.priorityScore);

            // 2. DOM ì—…ë°ì´íŠ¸
            taskListContainer.innerHTML = '';
            loadingMessage.classList.add('hidden');

            if (currentTasks.length === 0) {
                taskListContainer.innerHTML = '<p class="text-gray-500 text-center p-8 bg-white rounded-xl">âœ¨ ì•„ì§ ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì—…ë¬´ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>';
                return;
            }

            currentTasks.forEach(task => {
                // ì ìˆ˜ ë²”ìœ„ì— ë”°ë¼ ìƒ‰ìƒ í´ë˜ìŠ¤ ì§€ì • (ë²”ìœ„ëŠ” ê¸°ë³¸ ê°€ì¤‘ì¹˜(3, 3, 2, 1) ê¸°ì¤€ ìµœëŒ€ 24, ìµœì†Œ 4ì ì„ ê³ ë ¤í•˜ì—¬ ëŒ€ëµì ìœ¼ë¡œ ì„¤ì •. ê°€ì¤‘ì¹˜ ë³€ê²½ ì‹œ ê¸°ì¤€ì€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë‚˜ UI ëª©ì ìƒ ê³ ì •)
                const priorityClass = task.priorityScore >= 18 ? 'border-high bg-gradient-high' :
                                      task.priorityScore >= 10 ? 'border-medium bg-gradient-medium' :
                                      'border-low bg-gradient-low';
                
                const taskCard = document.createElement('div');
                taskCard.className = `task-card flex items-center justify-between p-4 rounded-xl ${priorityClass}`;
                taskCard.dataset.id = task.id;

                taskCard.innerHTML = `
                    <div class="flex-1 min-w-0">
                        <p class="text-lg font-semibold text-gray-900 truncate">${task.name}</p>
                        <div class="mt-1 text-sm text-gray-700 flex flex-wrap gap-x-4 gap-y-1">
                            <span>ì¤‘ìš”ë„: ${task.importance} (${getImportanceDescription(task.importance)})</span>
                            <span>ê¸´ê¸‰ë„: ${task.urgency} (${getUrgencyDescription(task.urgency)})</span>
                            <span>ì˜í–¥ë ¥: ${task.impact} (${getImpactDescription(task.impact)})</span>
                            <span>ë…¸ë ¥: ${task.effort} (${getEffortDescription(task.effort)})</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3 ml-4">
                        <span class="priority-score text-gray-800">${task.priorityScore}</span>
                        <button class="delete-btn text-gray-500 hover:text-red-600 transition p-2 rounded-full hover:bg-white" aria-label="ì—…ë¬´ ì‚­ì œ">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 10-2 0v6a1 1 0 102 0V8z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                `;
                taskListContainer.appendChild(taskCard);
            });

            // 3. ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const taskId = e.currentTarget.closest('.task-card').dataset.id;
                    showDeleteConfirmModal(taskId);
                });
            });
        }

        /**
         * ì—…ë¬´ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ì„ í‘œì‹œí•©ë‹ˆë‹¤.
         * @param {string} taskId - ì‚­ì œí•  ì—…ë¬´ì˜ ID
         */
        function showDeleteConfirmModal(taskId) {
            taskToDeleteId = taskId;
            document.getElementById('confirm-text').textContent = 'ì„ íƒí•˜ì‹  ì—…ë¬´ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?';
            confirmModal.classList.remove('hidden');
        }

        /**
         * ì‹¤ì œë¡œ ì—…ë¬´ë¥¼ ì‚­ì œí•˜ê³  ë Œë”ë§ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         */
        function deleteTask() {
            if (!taskToDeleteId) return;

            // ë¡œì»¬ ë°ì´í„°ì—ì„œ ì—…ë¬´ ì‚­ì œ
            currentTasks = currentTasks.filter(task => task.id !== taskToDeleteId);
            
            // localStorageì— ì €ì¥ ë° UI ì—…ë°ì´íŠ¸
            saveTasks(currentTasks);
            renderTasks();

            taskToDeleteId = null;
            confirmModal.classList.add('hidden');
        }

        // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ---

        // 1. ì—…ë¬´ ì¶”ê°€ í¼ ì œì¶œ ì²˜ë¦¬
        taskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const taskName = document.getElementById('task-name').value.trim();
            if (!taskName) return;

            const importanceValue = document.getElementById('importance').value;
            const urgencyValue = document.getElementById('urgency').value;
            const impactValue = document.getElementById('impact').value;
            const effortValue = document.getElementById('effort').value;

            const newTask = {
                id: crypto.randomUUID(), 
                name: taskName,
                importance: importanceValue,
                urgency: urgencyValue,
                impact: impactValue,
                effort: effortValue,
            };

            // ë¡œì»¬ ë°ì´í„°ì— ìƒˆ ì—…ë¬´ ì¶”ê°€
            currentTasks.push(newTask);
            
            // localStorageì— ì €ì¥ ë° UI ì—…ë°ì´íŠ¸
            saveTasks(currentTasks);
            renderTasks();

            // í¼ ì´ˆê¸°í™” ë° ë””ìŠ¤í”Œë ˆì´ ì´ˆê¸°ê°’ ì„¤ì • (3)
            taskForm.reset();
            updateSliderDisplay('importance', '3');
            updateSliderDisplay('urgency', '3');
            updateSliderDisplay('impact', '3');
            updateSliderDisplay('effort', '3');
        });

        // 2. ëª¨ë‹¬ ë²„íŠ¼ ì´ë²¤íŠ¸
        modalConfirmBtn.addEventListener('click', deleteTask);
        modalCancelBtn.addEventListener('click', () => {
            confirmModal.classList.add('hidden');
            taskToDeleteId = null;
        });
        
        // 3. í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ ë° ë Œë”ë§
        window.onload = function() {
            // 1. ê°€ì¤‘ì¹˜ ë¡œë“œ ë° ì„¤ì •
            currentWeights = loadWeights();
            syncWeightInputs();
            updateFormulaDisplay();
            setupWeightListeners(); 
            
            // 2. ì—…ë¬´ ë¡œë“œ ë° ë Œë”ë§
            currentTasks = loadTasks();
            renderTasks();
            
            // 3. ì´ˆê¸° ë¡œë“œ ì‹œ ìŠ¬ë¼ì´ë” ë””ìŠ¤í”Œë ˆì´ ì´ˆê¸°í™” (ì—…ë¬´ ì…ë ¥ ì„¹ì…˜)
            // ê¸°ë³¸ê°’ 3ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì´ˆê¸° ì„¤ëª…ì„ í‘œì‹œí•˜ë„ë¡ í˜¸ì¶œ
            updateSliderDisplay('importance', document.getElementById('importance').value);
            updateSliderDisplay('urgency', document.getElementById('urgency').value);
            updateSliderDisplay('impact', document.getElementById('impact').value);
            updateSliderDisplay('effort', document.getElementById('effort').value);
        };

    </script>
</body>
</html>
